language: python
python:
- '3.7'
branches:
  only:
  - main
install:
- pip install -r requirements.txt
script:
- python -m pytest tests --cov
deploy:
  provider: gae
  keyfile: personal-website-318015-2ec849c2abf8.json
  project: personal-website-318015
  on: main
before_install:
- openssl aes-256-cbc -K $encrypted_5bc4caf4d407_key -iv $encrypted_5bc4caf4d407_iv
  -in personal-website-318015-2ec849c2abf8.json.enc -out personal-website-318015-2ec849c2abf8.json
  -d
